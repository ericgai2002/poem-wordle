<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>è¯—è¯ Wordle</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body{font-family:"Helvetica Neue",Arial,sans-serif;text-align:center;padding:2rem;background:#f5f5f5}
  h1{margin-bottom:0.3rem}
  #lengthInfo{margin:0 0 1rem 0;font-size:18px;color:#555}
  #board{display:flex;flex-direction:column;gap:6px;align-items:center;margin-bottom:1rem}
  .row{display:flex;gap:6px}
  .tile{width:38px;height:38px;border:2px solid #d3d6da;display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:bold;background:#fff;border-radius:4px;user-select:none}
  .correct{background:#6aaa64;border-color:#6aaa64;color:#fff}
  .present{background:#c9b458;border-color:#c9b458;color:#fff}
  .absent{background:#787c7e;border-color:#787c7e;color:#fff}
  #guess{font-size:20px;padding:6px;width:320px;border-radius:4px;border:1px solid #ccc;margin-bottom:0.5rem}
  #submit{font-size:18px;padding:6px 14px;border:none;border-radius:4px;background:#538d4e;color:#fff;cursor:pointer}
  #submit:disabled{background:#9aa0a6;cursor:not-allowed}
  #message{height:1.4rem;margin-top:0.5rem;color:#d32f2f}
</style>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js"></script>
</head>
<body>
  <h1>çŒœè¯—å¥ Wordle</h1>
  <p id="lengthInfo">æ­£åœ¨åŠ è½½è¯—å¥â€¦</p>
  <div id="board"></div>
  <input id="guess" placeholder="è¾“å…¥å®Œæ•´è¯—å¥" maxlength="14" autofocus>
  <div>
    <button id="submit" disabled>æäº¤</button>
  </div>
  <p id="message"></p>

<script>
/********** æœ¬åœ°å¤‡ç”¨é¢˜åº“ **********/
const poems10=["ç™½æ—¥ä¾å±±å°½é»„æ²³å…¥æµ·æµ","æ˜¥çœ ä¸è§‰æ™“å¤„å¤„é—»å•¼é¸Ÿ","ä¼šå½“å‡Œç»é¡¶ä¸€è§ˆä¼—å±±å°","ç©ºå±±ä¸è§äººä½†é—»äººè¯­å“","æ±Ÿå—å¯é‡‡è²è²å¶ä½•ç”°ç”°","æ¬²ç©·åƒé‡Œç›®æ›´ä¸Šä¸€å±‚æ¥¼","å›½ç ´å±±æ²³åœ¨åŸæ˜¥è‰æœ¨æ·±","æ˜¥é£åˆç»¿æ±Ÿå—å²¸æ˜æœˆä½•æ—¶ç…§æˆ‘è¿˜","å­¤å¸†è¿œå½±ç¢§ç©ºå°½å”¯è§é•¿æ±Ÿå¤©é™…æµ","çª—å«è¥¿å²­åƒç§‹é›ªé—¨æ³Šä¸œå´ä¸‡é‡Œèˆ¹","é»„å››å¨˜å®¶èŠ±æ»¡è¹Šåƒæœµä¸‡æœµå‹æä½","åƒå±±é¸Ÿé£ç»ä¸‡å¾„äººè¸ªç­","æœˆè½ä¹Œå•¼éœœæ»¡å¤©æ±Ÿæ«æ¸”ç«å¯¹æ„çœ ","é‡ç«çƒ§ä¸å°½æ˜¥é£å¹åˆç”Ÿ","æŸ´é—¨é—»çŠ¬å é£é›ªå¤œå½’äºº","é“¶çƒ›ç§‹å…‰å†·ç”»å±è½»ç½—å°æ‰‡æ‰‘æµè¤","å‰ä¸è§å¤äººåä¸è§æ¥è€…","å¤§æ¼ å­¤çƒŸç›´é•¿æ²³è½æ—¥åœ†","å±±é‡æ°´å¤ç–‘æ— è·¯æŸ³æš—èŠ±æ˜åˆä¸€æ‘","é”„ç¦¾æ—¥å½“åˆæ±—æ»´ç¦¾ä¸‹åœŸ","ä¸¾å¤´æœ›æ˜æœˆä½å¤´æ€æ•…ä¹¡","æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­æ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œ","é’é’å­è¡¿æ‚ æ‚ æˆ‘å¿ƒ","æ˜æœˆæ¾é—´ç…§æ¸…æ³‰çŸ³ä¸Šæµ"];
const poems14=["é»„æ²³è¿œä¸Šç™½äº‘é—´ä¸€ç‰‡å­¤åŸä¸‡ä»å±±","è‘¡è„ç¾é…’å¤œå…‰æ¯æ¬²é¥®çµç¶é©¬ä¸Šå‚¬","æœˆé»‘é›é£é«˜å•äºå¤œéé€ƒ","å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨åƒé‡‘æ•£å°½è¿˜å¤æ¥","æµ·å†…å­˜çŸ¥å·±å¤©æ¶¯è‹¥æ¯”é‚»","åŠå›æ›´å°½ä¸€æ¯é…’è¥¿å‡ºé˜³å…³æ— æ•…äºº","äººç”Ÿå¾—æ„é¡»å°½æ¬¢è«ä½¿é‡‘æ¨½ç©ºå¯¹æœˆ","æ¡ƒèŠ±æ½­æ°´æ·±åƒå°ºä¸åŠæ±ªä¼¦é€æˆ‘æƒ…","é†‰å§æ²™åœºå›è«ç¬‘å¤æ¥å¾æˆ˜å‡ äººå›","å¡ä¸‹ç§‹æ¥é£æ™¯å¼‚è¡¡é˜³é›å»æ— ç•™æ„","é»„æ²™ç™¾æˆ˜ç©¿é‡‘ç”²ä¸ç ´æ¥¼å…°ç»ˆä¸è¿˜","é»‘äº‘å‹åŸåŸæ¬²æ‘§ç”²å…‰å‘æ—¥é‡‘é³å¼€","ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤ææ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥","æ¥å¤©è²å¶æ— ç©·ç¢§æ˜ æ—¥è·èŠ±åˆ«æ ·çº¢","ç™½æ—¥æ”¾æ­Œé¡»çºµé…’é’æ˜¥ä½œä¼´å¥½è¿˜ä¹¡","å±±å›è·¯è½¬ä¸è§å›é›ªä¸Šç©ºç•™é©¬è¡Œå¤„","çƒ½ç«è¿ä¸‰æœˆå®¶ä¹¦æŠµä¸‡é‡‘"];

/********** åœ¨çº¿è·å–è¯—å¥ï¼Œå¸¦è¶…æ—¶ä¸é‡è¯• **********/
async function fetchPoem(lenNeeded,maxTry=8){
  for(let i=0;i<maxTry;i++){
    try{
      const sentence=await new Promise((res,rej)=>{
        const timer=setTimeout(()=>rej(new Error('timeout')),2000);
        jinrishici.load(r=>{clearTimeout(timer);res(r.data.content.replace(/[ï¼Œã€‚ï¼ï¼Ÿï¼›,.!?;\s]/g,''));},err=>{clearTimeout(timer);rej(err);});
      });
      if(sentence.length===lenNeeded) return sentence;
    }catch(e){ /* ignore and retry */ }
  }
  throw new Error('max try exceeded');
}

/********** Wordle é€»è¾‘ **********/
const board=document.getElementById('board');
const input=document.getElementById('guess');
const submitBtn=document.getElementById('submit');
const msg=document.getElementById('message');
const lenInfoEl=document.getElementById('lengthInfo');
let answer='',answerLen=0,attempts=0;const MAX_ATTEMPTS=6;
function startGame(poem){
  answer=poem;answerLen=poem.length;
  lenInfoEl.textContent=`æœ¬å±€è¯—å¥å…± ${answerLen} å­—`;
  input.maxLength=answerLen;submitBtn.disabled=false;
  submitBtn.addEventListener('click',handleGuess);
  input.addEventListener('keypress',e=>{if(e.key==='Enter')handleGuess();});
}
function handleGuess(){
  const guessRaw=input.value.trim();
  if(guessRaw.length!==answerLen){showMessage(`éœ€è¾“å…¥ ${answerLen} ä¸ªå­—ï¼Œä½ è¾“å…¥äº† ${guessRaw.length} ä¸ªã€‚`);return;}
  if(/[\s]/.test(guessRaw)){showMessage('è¯·å‹¿åŒ…å«ç©ºæ ¼æˆ–æ ‡ç‚¹');return;}
  attempts++;renderRow(guessRaw);
  if(guessRaw===answer){showMessage(`ğŸ‰ æ­å–œï¼ä½ åœ¨ç¬¬ ${attempts} æ¬¡çŒœä¸­ï¼`,true);endGame();return;}
  if(attempts>=MAX_ATTEMPTS){showMessage(`ğŸ’¡ æœºä¼šç”¨å°½ï¼ç­”æ¡ˆæ˜¯ï¼š${answer}`,true);endGame();}else{showMessage('');}
  input.value='';input.focus();
}
function renderRow(guess){
  const row=document.createElement('div');row.className='row';
  const guessChars=[...guess];const answerChars=[...answer];const statusArr=Array(answerLen).fill('absent');
  guessChars.forEach((ch,i)=>{if(ch===answerChars[i]){statusArr[i]='correct';answerChars[i]=null;}});
  guessChars.forEach((ch,i)=>{if(statusArr[i]!=='correct'&&answerChars.includes(ch)){statusArr[i]='present';answerChars[answerChars.indexOf(ch)]=null;}});
  guessChars.forEach((ch,i)=>{const cell=document.createElement('span');cell.className='tile '+statusArr[i];cell.textContent=ch;row.appendChild(cell);});
  board.appendChild(row);board.scrollTop=board.scrollHeight;
}
function showMessage(text,persistent=false){msg.textContent=text;if(!persistent&&text){setTimeout(()=>{msg.textContent='';},2000);}}
function endGame(){submitBtn.disabled=true;input.disabled=true;}

/********** åˆå§‹åŒ– **********/
(async()=>{
  const needLen=Math.random()<0.5?10:14;
  try{
    const poem=await fetchPoem(needLen);
    startGame(poem);
  }catch(e){
    console.warn('åœ¨çº¿è·å–å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°é¢˜åº“',e);
    const fallback=(needLen===10?poems10:poems14);
    const poem=fallback[Math.floor(Math.random()*fallback.length)];
    startGame(poem);
  }
})();
</script>
</body>
</html>