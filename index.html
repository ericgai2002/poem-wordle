<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>è¯—è¯ Wordle</title>
<link rel="icon" href="data:,"/>
<style>
  body{font-family:"Helvetica Neue",Arial,sans-serif;text-align:center;padding:2rem;background:#f5f5f5}
  h1{margin-bottom:0.5rem}
  #difficulty{display:flex;justify-content:center;gap:1rem;margin-bottom:1rem}
  .diff-btn{padding:8px 18px;font-size:16px;border:none;border-radius:6px;cursor:pointer;color:#fff}
  .easy{background:#4caf50}
  .hell{background:#b71c1c}
  #lengthInfo{margin:0 0 1rem 0;font-size:18px;color:#555}
  #board{display:flex;flex-direction:column;gap:6px;align-items:center;margin-bottom:1rem}
  .row{display:flex;gap:6px}
  .tile{width:38px;height:38px;border:2px solid #d3d6da;display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:bold;background:#fff;border-radius:4px;user-select:none}
  .correct{background:#6aaa64;border-color:#6aaa64;color:#fff}
  .present{background:#c9b458;border-color:#c9b458;color:#fff}
  .absent{background:#787c7e;border-color:#787c7e;color:#fff}
  #guess{font-size:20px;padding:6px;width:320px;border-radius:4px;border:1px solid #ccc;margin-bottom:0.5rem}
  #submit{font-size:18px;padding:6px 14px;border:none;border-radius:4px;background:#538d4e;color:#fff;cursor:pointer}
  #submit:disabled,#guess:disabled{background:#9aa0a6;cursor:not-allowed}
  #message{height:1.4rem;margin-top:0.5rem;color:#d32f2f}
</style>
<!-- ä»Šæ—¥è¯—è¯ SDK -->
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js"></script>
</head>
<body>
  <h1>çŒœè¯—å¥ Wordle</h1>
  <div id="difficulty">
    <button id="easyBtn" class="diff-btn easy">åŸºç¡€éš¾åº¦</button>
    <button id="hellBtn" class="diff-btn hell">åœ°ç‹±éš¾åº¦</button>
  </div>
  <p id="lengthInfo"></p>
  <div id="board"></div>
  <input id="guess" placeholder="è¾“å…¥å®Œæ•´è¯—å¥" maxlength="14" disabled/>
  <div>
    <button id="submit" disabled>æäº¤</button>
  </div>
  <p id="message"></p>

<script>
/**************** æœ¬åœ°é¢˜åº“ ****************/
const poems10=["ç™½æ—¥ä¾å±±å°½é»„æ²³å…¥æµ·æµ","æ˜¥çœ ä¸è§‰æ™“å¤„å¤„é—»å•¼é¸Ÿ","ä¼šå½“å‡Œç»é¡¶ä¸€è§ˆä¼—å±±å°","ç©ºå±±ä¸è§äººä½†é—»äººè¯­å“","æ±Ÿå—å¯é‡‡è²è²å¶ä½•ç”°ç”°","æ¬²ç©·åƒé‡Œç›®æ›´ä¸Šä¸€å±‚æ¥¼","å›½ç ´å±±æ²³åœ¨åŸæ˜¥è‰æœ¨æ·±","é»„å››å¨˜å®¶èŠ±æ»¡è¹Šåƒæœµä¸‡æœµå‹æä½","åƒå±±é¸Ÿé£ç»ä¸‡å¾„äººè¸ªç­","é‡ç«çƒ§ä¸å°½æ˜¥é£å¹åˆç”Ÿ","æŸ´é—¨é—»çŠ¬å é£é›ªå¤œå½’äºº","å‰ä¸è§å¤äººåä¸è§æ¥è€…","å¤§æ¼ å­¤çƒŸç›´é•¿æ²³è½æ—¥åœ†","é”„ç¦¾æ—¥å½“åˆæ±—æ»´ç¦¾ä¸‹åœŸ","ä¸¾å¤´æœ›æ˜æœˆä½å¤´æ€æ•…ä¹¡","æ˜æœˆæ¾é—´ç…§æ¸…æ³‰çŸ³ä¸Šæµ","çƒ½ç«è¿ä¸‰æœˆå®¶ä¹¦æŠµä¸‡é‡‘","æœˆé»‘é›é£é«˜å•äºå¤œéé€ƒ"];
const poems14=["é»„æ²³è¿œä¸Šç™½äº‘é—´ä¸€ç‰‡å­¤åŸä¸‡ä»å±±","è‘¡è„ç¾é…’å¤œå…‰æ¯æ¬²é¥®çµç¶é©¬ä¸Šå‚¬","æ˜¥é£åˆç»¿æ±Ÿå—å²¸æ˜æœˆä½•æ—¶ç…§æˆ‘è¿˜","å­¤å¸†è¿œå½±ç¢§ç©ºå°½å”¯è§é•¿æ±Ÿå¤©é™…æµ","çª—å«è¥¿å²­åƒç§‹é›ªé—¨æ³Šä¸œå´ä¸‡é‡Œèˆ¹","å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨åƒé‡‘æ•£å°½è¿˜å¤æ¥","åŠå›æ›´å°½ä¸€æ¯é…’è¥¿å‡ºé˜³å…³æ— æ•…äºº","äººç”Ÿå¾—æ„é¡»å°½æ¬¢è«ä½¿é‡‘æ¨½ç©ºå¯¹æœˆ","æ¡ƒèŠ±æ½­æ°´æ·±åƒå°ºä¸åŠæ±ªä¼¦é€æˆ‘æƒ…","é†‰å§æ²™åœºå›è«ç¬‘å¤æ¥å¾æˆ˜å‡ äººå›","å¡ä¸‹ç§‹æ¥é£æ™¯å¼‚è¡¡é˜³é›å»æ— ç•™æ„","é»„æ²™ç™¾æˆ˜ç©¿é‡‘ç”²ä¸ç ´æ¥¼å…°ç»ˆä¸è¿˜","é»‘äº‘å‹åŸåŸæ¬²æ‘§ç”²å…‰å‘æ—¥é‡‘é³å¼€","ç«¹å¤–æ¡ƒèŠ±ä¸‰ä¸¤ææ˜¥æ±Ÿæ°´æš–é¸­å…ˆçŸ¥","æ¥å¤©è²å¶æ— ç©·ç¢§æ˜ æ—¥è·èŠ±åˆ«æ ·çº¢","ç™½æ—¥æ”¾æ­Œé¡»çºµé…’é’æ˜¥ä½œä¼´å¥½è¿˜ä¹¡","å±±å›è·¯è½¬ä¸è§å›é›ªä¸Šç©ºç•™é©¬è¡Œå¤„","æ¬²æŠŠè¥¿æ¹–æ¯”è¥¿å­æ·¡å¦†æµ“æŠ¹æ€»ç›¸å®œ","å±±é‡æ°´å¤ç–‘æ— è·¯æŸ³æš—èŠ±æ˜åˆä¸€æ‘","é“¶çƒ›ç§‹å…‰å†·ç”»å±è½»ç½—å°æ‰‡æ‰‘æµè¤", "æœˆè½ä¹Œå•¼éœœæ»¡å¤©æ±Ÿæ«æ¸”ç«å¯¹æ„çœ "];
/*************** åœ¨çº¿ API è·å– ***************/
async function fetchPoem(len,tries=6){
  for(let i=0;i<tries;i++){
    try{
      const p=await new Promise((res,rej)=>{
        const to=setTimeout(()=>rej('timeout'),2500);
        jinrishici.load(r=>{clearTimeout(to);res(r.data.content.replace(/[ï¼Œã€‚ï¼ï¼Ÿï¼›,.!?;\s]/g,''));},e=>{clearTimeout(to);rej(e)});
      });
      if(p.length===len) return p;
    }catch(e){/*retry*/}
  }
  throw new Error('API fails');
}
/***************** DOM *****************/
const board=$('#board');
const input=$('#guess');
const submitBtn=$('#submit');
const msg=$('#message');
const lenInfo=$('#lengthInfo');
function $(sel){return document.querySelector(sel);} 
/***************** æ¸¸æˆæ ¸å¿ƒ *****************/
let answer='',answerLen=0,attempts=0;const MAX=20;
function initDifficulty(){
  $('#easyBtn').onclick=()=>start('easy');
  $('#hellBtn').onclick=()=>start('hell');
}
async function start(mode){
  $('#difficulty').style.display='none';
  lenInfo.textContent='åŠ è½½è¯—å¥â€¦';
  input.disabled=submitBtn.disabled=true;
  const needLen=Math.random()<0.5?10:14;
  try{
    answer= mode==='easy'
      ? (needLen===10?poems10:poems14)[Math.floor(Math.random()* (needLen===10?poems10:poems14).length)]
      : await fetchPoem(needLen);
    setupGame();
  }catch(e){msg.textContent='åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°';console.error(e);}
}
function setupGame(){
  answerLen=answer.length;attempts=0;board.innerHTML='';
  lenInfo.textContent=`æœ¬å±€è¯—å¥å…± ${answerLen} å­—`;
  input.maxLength=answerLen;input.value='';input.disabled=false;submitBtn.disabled=false;input.focus();
  submitBtn.onclick=guess;
  input.onkeypress=e=>{if(e.key==='Enter')guess();};
}
function guess(){
  const g=input.value.trim();
  if(g.length!==answerLen){toast(`éœ€ ${answerLen} å­—`);return;}
  if(/\s/.test(g)){toast('è¯·å‹¿ç©ºæ ¼');return;}
  attempts++;render(g);
  if(g===answer){toast(`ğŸ‰ ${attempts} æ¬¡çŒœä¸­`,true);end();return;}
  if(attempts>=MAX){toast(`ğŸ’¡ ç­”æ¡ˆï¼š${answer}`,true);end();return;}
  input.value='';input.focus();
}
function render(g){
  const r=document.createElement('div');r.className='row';
  const gs=[...g],as=[...answer],stat=Array(answerLen).fill('absent');
  gs.forEach((c,i)=>{if(c===as[i]){stat[i]='correct';as[i]=null;}});
  gs.forEach((c,i)=>{if(stat[i]==='absent'&&as.includes(c)){stat[i]='present';as[as.indexOf(c)]=null;}});
  gs.forEach((c,i)=>{const s=document.createElement('span');s.className='tile '+stat[i];s.textContent=c;r.appendChild(s);});
  board.appendChild(r);board.scrollTop=board.scrollHeight;
}
function toast(t,end=false){msg.textContent=t;if(!end) setTimeout(()=>msg.textContent='',2000);}
function end(){submitBtn.disabled=input.disabled=true;}
window.onload=initDifficulty;
</script>
</body>
</html>